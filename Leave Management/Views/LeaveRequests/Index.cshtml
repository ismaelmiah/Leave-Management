@model AdminLeaveRequestVm

@{
    ViewData["Title"] = "Index";
}

<div class="row">
    <div class="col-6">
        <h2 class="text-primary">Leave Applications List </h2>
    </div>
    <div class="col-6 text-right">
        <a class="btn btn-success" asp-action="Upsert"><i class="fas fa-plus"></i> &nbsp; Create New Leave Application</a>
    </div>
</div>
<br />
<div class="row">
    <div class="col-md-3">
        <div class="card" style="width: 18rem;">
            <div class="card-body text-center">
                <h1 class="card-title">@Model.TotalRequest</h1>
                <h5 class="card-text">@Html.DisplayNameFor(x => x.TotalRequest)</h5>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card" style="width: 18rem;">
            <div class="card-body text-center">
                <h1 class="card-title text-success">@Model.PendingRequest</h1>
                <h5 class="card-text">@Html.DisplayNameFor(x => x.PendingRequest)</h5>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card" style="width: 18rem;">
            <div class="card-body text-center">
                <h1 class="card-title text-warning">@Model.ApprovedRequest</h1>
                <h5 class="card-text">@Html.DisplayNameFor(x => x.ApprovedRequest)</h5>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card" style="width: 18rem;">
            <div class="card-body text-center">
                <h1 class="card-title text-danger">@Model.RejectedRequest</h1>
                <h5 class="card-text">@Html.DisplayNameFor(x => x.RejectedRequest)</h5>
            </div>
        </div>
    </div>
</div>
<br />
<br />
<h1>Leave Application Logs</h1>
<br />
<div class="row p-4 border rounded">
    <table id="mytable" class="table table-striped table-bordered" style="width: 100%">
        <thead class="thead-dark">
            <tr class="table-info">
                <th>
                    Employee Name
                </th>
                <th>
                    Start Date
                </th>
                <th>
                    End Date
                </th>
                <th>
                    Leave Type
                </th>
                <th>
                    Requested Date
                </th>
                <th>
                    Approval Status
                </th>
                <th>
                    Actions
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.LeaveRequest)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(x => item.RequestingEmployee.Firstname) @Html.DisplayFor(x => item.RequestingEmployee.Lastname)
                    </td>
                    <td>
                        @Html.DisplayFor(x => item.StartDate)
                    </td>
                    <td>
                        @Html.DisplayFor(x => item.EndDate)
                    </td>
                    <td>
                        @Html.DisplayFor(x => item.LeaveType.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(x => item.DateRequested)
                    </td>
                    <td>

                        @if (item.Approved == false)
                        {
                            <span class="badge badge-danger">Rejected</span>
                        }
                        else if (item.Approved == null)
                        {
                            <span class="badge badge-warning">Pending</span>

                        }
                        else
                        {
                            <span class="badge badge-success">Approved</span>
                        }
                    </td>
                    <td>
                        <a asp-action="Upsert" asp-route-id="@item.Id">Edit</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

@section Scripts{
    <script>
        $(document).ready(function () {
            $('#mytable').dataTable();
        });
    </script>
}
